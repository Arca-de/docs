<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-100567975-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Awards | phpVMS Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Awards | phpVMS Docs"><meta data-react-helmet="true" name="description" content="Awards have been improved from the previous version. Awards are created in the admin panel, but are associated with an Award plugin. This class allows you to check any conditions to see if the award should be given. These award classes can also be passed a parameter (a number, string or JSON string), so you can use the same Award class for multiple awards."><meta data-react-helmet="true" property="og:description" content="Awards have been improved from the previous version. Awards are created in the admin panel, but are associated with an Award plugin. This class allows you to check any conditions to see if the award should be given. These award classes can also be passed a parameter (a number, string or JSON string), so you can use the same Award class for multiple awards."><meta data-react-helmet="true" property="og:url" content="https://docs.phpvms.net/developers/awards"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.phpvms.net/developers/awards"><link rel="stylesheet" href="/styles.43847340.css">
<link rel="preload" href="/styles.798c4628.js" as="script">
<link rel="preload" href="/runtime~main.b13a76aa.js" as="script">
<link rel="preload" href="/main.54264b06.js" as="script">
<link rel="preload" href="/1.65f0aab0.js" as="script">
<link rel="preload" href="/2.f0c40406.js" as="script">
<link rel="preload" href="/30.9a72057c.js" as="script">
<link rel="preload" href="/ec1ed54d.c8652573.js" as="script">
<link rel="preload" href="/17896441.bbe5e8aa.js" as="script">
<link rel="preload" href="/840498dd.3849873c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">phpVMS Docs</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">phpVMS Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/getting-started/requirements">Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/getting-started/download">Download</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installation/uploading">Uploading Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installation/vhost">VHost Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installation/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installation/cron">Cron/Scheduled Tasks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installation/importing">Importing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/installation/upgrading">Upgrading</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/config/files">Config Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/config/optimizing">Optimizing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Themes and Layouts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/customize/layouts">Layouts and Template Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/customize/theming">Theming</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/customize/building-assets">Building Assets</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Developers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/developers/environment">Environment Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/developers/addons">Addons</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/developers/awards">Awards</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/auth">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/apis">APIs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ACARS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/acars/install-server">Installation (Server)</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/help/getting-help">Getting Help</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Awards</h1></header><div class="markdown"><p>Awards have been improved from the previous version. Awards are created in the admin panel, but are associated with an <code>Award</code> plugin. This class allows you to check any conditions to see if the award should be given. These award classes can also be passed a parameter (a number, string or JSON string), so you can use the same <code>Award</code> class for multiple awards.</p><p>All of the awards are run and scanned on the <code>UserStatsChanged</code> event, so when a PIREP is accepted, or other properties for the user are changed (e.g, the number of flights, flight hours, etc). The user being scanned is passed in as the <code>$user</code> property.</p><hr><h2 id="adding-an-award">Adding an Award</h2><p>An award consists of two parts:</p><ol><li>An award plugin</li><li>The award link</li></ol><p>The award link is created in the admin panel, linking an award to a plugin. The plugin allows for advanced, reusable plugins and can be as complex or as simple as you like. To create an award from a plugin, view the awards page:</p><p><img src="/assets/images/admin-awards-98a29b5a4476a3d09d6896080d9f3a12.png"></p><hr><h2 id="award-plugin-structure">Award Plugin Structure</h2><p>The award class needs to be placed in either the main Awards directory, or in a module, which can then be distributed as a full package.</p><ul><li><code>modules/Awards</code></li><li><code>modules/{YOUR_MODULE}/Awards</code></li></ul><h3 id="award-class">Award Class</h3><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The <code>modules/Awards/PilotFlightAwards.php</code> is a fully-commented example</p></div></div><p>The Award class basically looks like this:</p><pre><code class="language-php">&lt;?php

namespace Modules\Awards;

use App\Contracts\Award;

/**
 * The Award needs to extend the AwardInterface class. It&#x27;s abstract
 * so if check() isn&#x27;t implemented, it&#x27;ll throw an error
 */
class MyAward extends Award
{
    // The name of this award that shows in the Award class dropdown
    public $name = &#x27;My Award&#x27;;
    
    // If this award is selected in the dropdown, this description is shown
    // to the user to tell them what the parameter is
    public $param_description = &#x27;Describe what the parameter is&#x27;;
    
    /**
     * This method needs to be implemented
     * @param null $parameter Optional parameters that are passed in from the UI
     */
    public function check($parameter = null): bool
    {        
        if(!$parameter) {
            // Set $parameter to some good default
        }
        
        // Return true if the award should be awarded
        return true;
    }
}
</code></pre><h4 id="parameter-passed">Parameter passed</h4><p>The <code>$parameter</code> is the value that is set in the Award row in the admin panel. It&#x27;s optional, so it might be good for you to set a default if it&#x27;s null. An example could be the number of flights, so you can use the same <code>Award</code> class for different types of awards.</p><h4 id="accessing-information">Accessing information</h4><p>Your Award class, in the <code>check($parameter)</code> function, has access the class property called <code>$this-&gt;user</code>. For example, if you want to see the user&#x27;s flights, or if you wanted to have an award for a low landing rate:</p><pre><code class="language-php">// ...
// In the Award row in the admin, $landing_rate might be set to 100
// This check will get called when a PIREP is accepted, so you can 
// have access to the user&#x27;s last PIREP
public function check($landing_rate = null): bool
{
    // Have the default landing rate if it hasn&#x27;t been set in the admin
    // It&#x27;s best to make sure you set a default value if you&#x27;re using it
    if(!$landing_rate) {
        $landing_rate = 200;
    }
    
    if($this-&gt;user-&gt;last_pirep-&gt;landing_rate &lt;= (int) $landing_rate) {
        return true;
    }
    
    return false;
}
// ...
</code></pre></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/phpvms/docs/tree/master/docs/developers/awards.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/developers/addons"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Addons</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/api/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#adding-an-award" class="table-of-contents__link">Adding an Award</a></li><li><a href="#award-plugin-structure" class="table-of-contents__link">Award Plugin Structure</a><ul><li><a href="#award-class" class="table-of-contents__link">Award Class</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2020 phpvms</div></div></div></footer></div>
<script src="/styles.798c4628.js"></script>
<script src="/runtime~main.b13a76aa.js"></script>
<script src="/main.54264b06.js"></script>
<script src="/1.65f0aab0.js"></script>
<script src="/2.f0c40406.js"></script>
<script src="/30.9a72057c.js"></script>
<script src="/ec1ed54d.c8652573.js"></script>
<script src="/17896441.bbe5e8aa.js"></script>
<script src="/840498dd.3849873c.js"></script>
</body>
</html>